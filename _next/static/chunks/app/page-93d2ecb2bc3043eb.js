(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var o=s(5155),r=s(2115);let l=e=>{let t,s=new Set,o=(e,o)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=o?o:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,l={setState:o,getState:r,getInitialState:()=>n,subscribe:e=>(s.add(e),()=>s.delete(e))},n=t=e(o,r,l);return l},n=e=>e?l(e):l,a=e=>e,i=e=>{let t=n(e),s=e=>(function(e,t=a){let s=r.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return r.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},d=(e=>e?i(e):i)(e=>({todos:[],input:"",selectedId:0,setTodos:t=>e({todos:t}),setInput:t=>e({input:t}),setSelectedId:t=>e({selectedId:t})}));function c(){return(0,o.jsx)("header",{children:(0,o.jsx)("h1",{className:"text-center font-bold text-2xl mb-5",children:"Todo List"})})}let u=()=>Number(Math.random().toString().substring(2,10)),x=()=>{let e=d(e=>e.todos),t=d(e=>e.setTodos),s=d(e=>e.setInput);return(0,r.useEffect)(()=>{sessionStorage.getItem("todos")||sessionStorage.setItem("todos",JSON.stringify([]));let e=sessionStorage.getItem("todos");t(e?JSON.parse(e):[])},[]),{addTodo:o=>{let r=o.trim();if(!r)return;let l={id:u(),text:r,completed:!1};t([...e,l]),s(""),sessionStorage.setItem("todos",JSON.stringify([...e,l]))}}};function m(){let e=d(e=>e.todos),t=d(e=>e.input),s=d(e=>e.setInput),{addTodo:l}=x(),n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e;null==(e=n.current)||e.focus()},[e]),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("input",{type:"text","arial-label":"New todo",placeholder:"Add Todo",ref:n,value:t,onChange:e=>s(e.target.value),onKeyDown:e=>"Enter"===e.key&&l(t),className:"border border-gray-300 py-1 px-2 flex-grow flex-shrink w-full"}),(0,o.jsx)("button",{"aria-label":"Add todo",className:"bg-blue-500 text-white px-4 rounded-r-md cursor-pointer hover:bg-blue-400",onClick:()=>l(t),children:"Add"})]})}let h=()=>{let e=d(e=>e.todos),t=d(e=>e.setTodos);return{toggleTodo:s=>{let o=e.map(e=>(e.id===s&&(e.completed=!e.completed),e));t(o),sessionStorage.setItem("todos",JSON.stringify([...o]))}}},g=()=>{let e=d(e=>e.todos),t=d(e=>e.setTodos);return{editTodo:(s,o)=>{let r=e.map(e=>(e.id===s&&(e.text=o),e));t(r),sessionStorage.setItem("todos",JSON.stringify([...r]))}}};function f(e){let{todo:t}=e,{toggleTodo:s}=h(),{editTodo:l}=g(),n=d(e=>e.setSelectedId),a=(0,r.useRef)(null),i=(0,r.useRef)(null),[c,u]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x&&i.current&&i.current.focus()},[x]);let f=e=>{var t;n(e),null==a||null==(t=a.current)||t.showModal()},p=()=>{u(t.text),m(!0)},j=(e,t)=>{l(e,t),m(!1)};return(0,o.jsx)("li",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:(0,o.jsx)("div",{className:"flex flex-grow items-center max-w-full",children:x?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"text","aria-label":"Edit todo: ".concat(t.text),className:"border border-solid border-gray-300 mr-2 px-2 flex-grow",value:c,ref:i,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"==e.key&&j(t.id,c)}),(0,o.jsx)("button",{"arial-label":"Confirm edit todo",className:"cursor-pointer text-green-600",onClick:()=>j(t.id,c),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-4",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}),(0,o.jsx)("button",{"arial-label":"Cancel edit todo",className:"cursor-pointer text-red-500 ml-3",onClick:()=>m(!1),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-4",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"checkbox","aria-label":"Mark todo as ".concat(t.completed?"incomplete":"complete"),checked:t.completed,onChange:()=>s(t.id),className:"form-checkbox text-blue-500"}),(0,o.jsx)("span",{className:t.completed?"flex-grow mx-2 w-72 line-through text-gray-400":"flex-grow mx-2 w-72",style:{lineHeight:"1.1em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.text}),(0,o.jsx)("button",{"arial-label":"Edit todo",className:"cursor-pointer text-gray-500",onClick:()=>p(),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-4",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})})}),(0,o.jsx)("button",{"arial-label":"Delete todo",className:"cursor-pointer ml-3 text-red-500",onClick:()=>f(t.id),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-4",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})})},t.id)}function p(){return 0==d(e=>e.todos).length&&(0,o.jsx)("footer",{children:(0,o.jsx)("p",{className:"text-center text-gray-500 mt-4 text-sm",children:"No todos yet. Add some todos."})})}let j=()=>{let e=d(e=>e.todos),t=d(e=>e.setTodos);return{deleteTodo:s=>{let o=e.filter(e=>e.id!==s);t(o),sessionStorage.setItem("todos",JSON.stringify([...o]))}}};function b(){let e=d(e=>e.selectedId),t=d(e=>e.setSelectedId),{deleteTodo:s}=j(),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let s=l.current,o=()=>{t(0)};return s&&(s.addEventListener("close",o),0!==e&&s.showModal()),()=>{null==s||s.removeEventListener("close",o)}},[e,t]),(0,o.jsx)("dialog",{ref:l,children:(0,o.jsxs)("form",{method:"dialog",className:"bg-white fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded p-7 w-96",children:[(0,o.jsxs)("header",{className:"flex items-center justify-between",children:[(0,o.jsx)("h2",{className:"font-bold text-xl",children:"Delete"}),(0,o.jsx)("button",{"aria-label":"Close modal",className:"cursor-pointer text-gray-400",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),(0,o.jsxs)("p",{className:"mt-6",children:["Are you sure you want to delete it?",(0,o.jsx)("br",{}),"This action can't be undone."]}),(0,o.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[(0,o.jsx)("button",{"aria-label":"Cancel delete todo",value:"cancel",className:"cursor-pointer bg-gray-100 py-2 px-4 rounded",children:"No"}),(0,o.jsx)("button",{"aria-label":"Confirm delete todo",value:"ok",className:"cursor-pointer bg-red-500 text-white py-2 px-4 rounded",onClick:()=>s(e),children:"Yes, delete!"})]})]})})}function w(){let e=d(e=>e.todos);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("article",{className:"bg-white mt-10 max-w-md mx-auto p-7 rounded-md shadow-lg",children:[(0,o.jsx)(c,{}),(0,o.jsxs)("main",{children:[(0,o.jsx)(m,{}),(0,o.jsx)("ul",{className:"divide-y divide-gray-300 mt-4",children:e.map(e=>(0,o.jsx)(f,{todo:e},e.id))})]}),(0,o.jsx)(p,{})]}),(0,o.jsx)(b,{})]})}function N(){return(0,o.jsx)("main",{className:"mx-3",children:(0,o.jsx)(w,{})})}},5615:(e,t,s)=>{Promise.resolve().then(s.bind(s,246))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5615)),_N_E=e.O()}]);